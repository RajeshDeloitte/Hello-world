<apex:page sidebar="false" title="Article List" controller="helpController" language="{!language}" showHeader="false" action="{!init}">
<apex:composition template="SiteCommunityHelpTemplate">

<apex:define name="body">
<script>
    h2.mainTitle{
            font-family: Arial;
            font-weight: bold;
            font-size: 12 px;
        }
        .HeaderTitle{
            font-family: Arial;
            font-weight: bold;
            font-size: 12 px;
        }
        td{
            vertical-align : top;
            text-align: left;
            font-family: Arial;
            font-size: 12 px;
        }
        .searchText{
            position: relative;
            top: -50px;
            left: 55px;
        }
        .iconSearch{
            position: relative;
            top: -68px;
            left: 297px;
        }
        .images{
            position: relative;
            top: -17px;
            left: -8px;
        }
        .images2{
            position: relative;
            top: -17px;
            left: 17px;
        }

        .results{
            position: relative;
            top: -25px;
            left: 0px;
            line-Height: 12px;
        }
        .pageNavigation{
            position: relative;
            top: -36px;
            left: -9px;
        }
        .currentPageIcon{
            position: relative;
            top: -17px;
            left: 28px;
        }
        .navPage{
            position: relative;
            top: -39px;
            left: -9px;
        }
        .navPageNumber{
            position: relative;
            top: -39px;
            left: 3px;
            text-align: center;
        }
        .navOfN{
            position: relative;
            top: -39px;
            left: 17px;
            text-align: left;
        }
        .textItems{
            position: relative;
            top: -10px;
            left: 25px;
            text-align: left;
        }
        hr {
            border: none;
            height: 1px;
            /* Set the hr color */
            color: #D3D3D3; /* old IE */
            background-color: #D3D3D3; /* Modern Browsers */
            position: relative;
            top: -15px;
        }
</script>
    <apex:form id="form" >
    <apex:actionFunction name="passStringToController" action="{!renderDetail}" rerender="form">
         <apex:param value="" assignTo="{!ArticleID}" name="ArticleID" />
         <apex:param value="" assignTo="{!selectedTopic}" name="selectedTopic"/>
         <apex:param value="" assignTo="{!Type}" name="Type"/>
     </apex:actionFunction>
        <apex:panelGrid columns="2">
        <!-- left column Search -->
            <apex:panelGroup rendered="{!showHeader}" >
                <apex:panelGrid width="345px">
                    <apex:pageBlock title="{!$Label.SearchTitle}"  >
                        <apex:outputText value="{!$Label.ArticleList}" styleClass="HeaderTitle" />
                        <div class="searchText">
                            <apex:inputText value="{!searchstring}" id="theSearchstring" maxlength="100" size="35"/>
                        </div>
                        <div class="iconSearch">
                            <apex:image url="{!URLFOR($Resource.Navigation, 'Assets/icon_search.png')}" width="18" height="18" onclick="searchArticle()"/>
                            <apex:actionFunction name="searchArticle" action="{!searchArticle}" rerender="theSearchResults,navigation,showMessage" />
                        </div>
                        <apex:panelGroup id="theSearchResults" styleClass="results" >
                        <apex:PageMessages id="showMessage" />
                            <knowledge:articleList articleVar="article" sortBy="Title" language="{!language}" pageNumber="{!currentPageNumber}" Keyword="{!searchstring}" hasMoreVar="false" pageSize="{!PageNumber}">
                                <apex:commandLink onclick="passStringToController('','',''); return false;"  rendered="true"/> <!--to fix a alignement bug due to a javascript funtion injected automatically -->
                                <apex:image url="{!URLFOR($Resource.Navigation, 'Assets/icon_article_arrow.png')}" width="6" height="9" onclick="passStringToController('{!article.id}','{!searchString}','{!article.articleTypeLabel}'); return false;" />

                                <apex:commandLink value="{!article.title}" onclick="passStringToController('{!article.id}','{!searchString}','{!article.articleTypeLabel}'); return false;" />
                                <p/>
                            </knowledge:articleList>
                        </apex:panelGroup>
                        <hr/>
            <!-- MK start navigation menu -->
                        <apex:panelGrid columns="8" id="navigation">
                            <apex:panelGroup styleClass="images">
                                <apex:image rendered="{!not(currentPage == 1)}" url="{!URLFOR($Resource.Navigation, 'Assets/btn_first.png')}" width="26" height="26" onclick="First()" onmouseover="this.src='{!URLFOR($Resource.Navigation, 'Assets/btn_first_hover.png')}'" onmouseout="this.src='{!URLFOR($Resource.Navigation, 'Assets/btn_first.png')}'" />
                                <apex:actionFunction name="First" action="{!First}" rerender="theSearchResults,navigation" />
                                <apex:image rendered="{!(currentPage == 1)}" url="{!URLFOR($Resource.Navigation, 'Assets/btn_first_disabled.png')}" width="26" height="26" />
                            </apex:panelGroup>
                            <apex:panelGroup styleClass="images" >
                                <apex:image rendered="{!not(currentPage == 1)}" url="{!URLFOR($Resource.Navigation, 'Assets/btn_previous.png')}" width="26" height="26" onclick="Previous()" onmouseover="this.src='{!URLFOR($Resource.Navigation, 'Assets/btn_previous_hover.png')}'" onmouseout="this.src='{!URLFOR($Resource.Navigation, 'Assets/btn_previous.png')}'" />
                                <apex:actionFunction name="Previous" action="{!Previous}" rerender="theSearchResults,navigation" />
                                <apex:image rendered="{!(currentPage == 1)}" url="{!URLFOR($Resource.Navigation, 'Assets/btn_previous_diabled.png')}" width="26" height="26" />
                            </apex:panelGroup>
                            <apex:panelGroup >
                                <div class="currentPageIcon">
                                    <apex:image url="{!URLFOR($Resource.Navigation, 'Assets/box_page_number.png')}" width="30" height="26" />
                                </div>
                                <apex:panelGrid columns="3" columnClasses="navPage,navPageNumber,navOfN">
                                    <apex:outputText value="{!$Label.Page}" />
                                    <apex:outputText value="{!currentPage}" />
                                    <apex:outputText value="{!$Label.of} {!maxPage}" />
                                </apex:panelGrid>
                            </apex:panelGroup>
                            <apex:panelGroup styleClass="images2">
                                <apex:image rendered="{!not(currentPage == maxPage)}" url="{!URLFOR($Resource.Navigation, 'Assets/btn_next.png')}" width="26" height="26" onclick="Next()" onmouseover="this.src='{!URLFOR($Resource.Navigation, 'Assets/btn_next_hover.png')}'" onmouseout="this.src='{!URLFOR($Resource.Navigation, 'Assets/btn_next.png')}'" />
                                <apex:actionFunction name="Next" action="{!Next}" rerender="theSearchResults,navigation" />
                                <apex:image rendered="{!(currentPage == maxPage)}" url="{!URLFOR($Resource.Navigation, 'Assets/btn_next_disabled.png')}" width="26" height="26" />
                            </apex:panelGroup>
                            <apex:panelGroup styleClass="images2">
                                <apex:image rendered="{!not(currentPage == maxPage)}" url="{!URLFOR($Resource.Navigation, 'Assets/btn_last.png')}" width="26" height="26" onclick="Last()" onmouseover="this.src='{!URLFOR($Resource.Navigation, 'Assets/btn_last_hover.png')}'" onmouseout="this.src='{!URLFOR($Resource.Navigation, 'Assets/btn_last.png')}'" />
                                <apex:actionFunction name="Last" action="{!Last}" rerender="theSearchResults,navigation" />
                                <apex:image rendered="{!(currentPage == maxPage)}" url="{!URLFOR($Resource.Navigation, 'Assets/btn_last_disabled.png')}" width="26" height="26" />
                            </apex:panelGroup>
                            <apex:panelGroup styleClass="textItems"  >
                                {!firstArticle} - {!lastArticle} {!$Label.of}  {!maxSize} {!$Label.items}
                            </apex:panelGroup>
                        </apex:panelGrid>
            <!-- MK stop  navigation menu -->
                    </apex:pageBlock>
                </apex:panelGrid>
            </apex:panelGroup>

            <apex:panelGroup id="Main" layout="">
            <!-- right column Main help -->
                <apex:panelGrid id="mainPanel" rendered="{!showMain}" width="100%">
                    <apex:pageBlock title="{!$Label.MainTitle}: {!helpPagePD.title}" rendered="{!type=='Product Documentation'}" >
                        <!--
                        <b>{!$Label.Summary}</b><br/>
                        <apex:outputField value="{!helpPagePD.Summary}" /><p/>
                        -->
                        <b>{!$Label.Description}</b><br/>
                        <apex:outputField value="{!helpPagePD.Description__c}" /><p/>

                        <apex:outputPanel rendered="{!HasAttachment}" >
                            <b><apex:outputText value="{!$Label.Attachments}" /></b><br/>
                            <apex:outputPanel rendered="{!HasAttachment1}" >
                                <apex:outputLink value="{!URLFOR($Action.Product_Documentation__kav.FileFieldDownload, helpPagePD.id, ['field'=$ObjectType.Product_Documentation__kav.fields.Attachment_1__Body__s.name])}">{!helpPagePD.attachment_1__Name__s}</apex:outputLink>
                                <br/>
                            </apex:outputpanel>
                            <apex:outputPanel rendered="{!HasAttachment2}" >
                                <apex:outputLink value="{!URLFOR($Action.Product_Documentation__kav.FileFieldDownload, helpPagePD.id, ['field'=$ObjectType.Product_Documentation__kav.fields.Attachment_2__Body__s.name])}">{!helpPagePD.attachment_2__Name__s}</apex:outputLink>
                                <br/>
                            </apex:outputpanel>
                            <apex:outputPanel rendered="{!HasAttachment3}" >
                                <apex:outputLink value="{!URLFOR($Action.Product_Documentation__kav.FileFieldDownload, helpPagePD.id, ['field'=$ObjectType.Product_Documentation__kav.fields.Attachment_3__Body__s.name])}">{!helpPagePD.attachment_3__Name__s}</apex:outputLink>
                                <br/>
                            </apex:outputpanel>
                        </apex:outputPanel>
                    </apex:pageBlock>
                    <apex:pageBlock title="{!$Label.MainTitle}: {!helpPageKA.title}" rendered="{!type=='Article'}">
                        <!--
                        <b>{!$Label.Summary}</b><br/>
                        <apex:outputField value="{!helpPageKA.Summary}" /><p/>
                        -->
                        <b>{!$Label.Description}</b><br/>
                        <apex:outputField value="{!helpPageKA.Description__c}" /><p/>
                        <b>{!$Label.Cause}</b><br/>
                        <apex:outputField value="{!helpPageKA.Cause__c}" /><p/>
                        <b>{!$Label.Resolution}</b><br/>
                        <apex:outputField value="{!helpPageKA.Resolution__c}" /><p/>
                        <apex:outputPanel rendered="{!HasAttachment}" >
                            <b><apex:outputText value="{!$Label.Attachments}" /></b><br/>
                            <apex:outputPanel rendered="{!HasAttachment1}" >
                                <apex:outputLink value="{!URLFOR($Action.Knowledge_Article__kav.FileFieldDownload, helpPageKA.id, ['field'=$ObjectType.Knowledge_Article__kav.fields.Attachment_1__Body__s.name])}">{!helpPageKA.attachment_1__Name__s}</apex:outputLink>
                                <br/>
                            </apex:outputpanel>
                            <apex:outputPanel rendered="{!HasAttachment2}" >
                                <apex:outputLink value="{!URLFOR($Action.Knowledge_Article__kav.FileFieldDownload, helpPageKA.id, ['field'=$ObjectType.Knowledge_Article__kav.fields.Attachment_2__Body__s.name])}">{!helpPageKA.attachment_2__Name__s}</apex:outputLink>
                                <br/>
                            </apex:outputpanel>
                            <apex:outputPanel rendered="{!HasAttachment3}" >
                                <apex:outputLink value="{!URLFOR($Action.Knowledge_Article__kav.FileFieldDownload, helpPageKA.id, ['field'=$ObjectType.Knowledge_Article__kav.fields.Attachment_3__Body__s.name])}">{!helpPageKA.attachment_3__Name__s}</apex:outputLink>
                                <br/>
                            </apex:outputpanel>
                        </apex:outputPanel>
                    </apex:pageBlock>
                </apex:panelGrid>
            </apex:panelGroup>
        </apex:panelgrid>
    </apex:form>
    <script type="text/javascript">

        var nAgt = navigator.userAgent;
        var browserName  = navigator.appName;
        var nameOffset,verOffset,ix;

        // In Opera, the true version is after "Opera" or after "Version"
        if ((verOffset=nAgt.indexOf("Opera"))!=-1) {
         browserName = "Opera";
        }
        // In MSIE, the true version is after "MSIE" in userAgent
        else if ((verOffset=nAgt.indexOf("MSIE"))!=-1) {
         browserName = "Microsoft Internet Explorer";
        }
        // In Chrome, the true version is after "Chrome"
        else if ((verOffset=nAgt.indexOf("Chrome"))!=-1) {
         browserName = "Chrome";
        }
        // In Safari, the true version is after "Safari" or after "Version"
        else if ((verOffset=nAgt.indexOf("Safari"))!=-1) {
         browserName = "Safari";
        }
        // In Firefox, the true version is after "Firefox"
        else if ((verOffset=nAgt.indexOf("Firefox"))!=-1) {
         browserName = "Firefox";
        }
        // In most other browsers, "name/version" is at the end of userAgent
        else if ( (nameOffset=nAgt.lastIndexOf(' ')+1) <
                  (verOffset=nAgt.lastIndexOf('/')) )
        {
         browserName = nAgt.substring(nameOffset,verOffset);
         fullVersion = nAgt.substring(verOffset+1);
         if (browserName.toLowerCase()==browserName.toUpperCase()) {
          browserName = navigator.appName;
         }
        }

         if (browserName == "Firefox") {
         document.write("<link type=\"text/css\" rel=\"stylesheet\" href=\"{!urlFor($Resource.firefoxCSS)}\">");
         }
         else if (browserName == "Chrome") {
         document.write("<link type=\"text/css\" rel=\"stylesheet\" href=\"{!urlFor($Resource.chromeCSS)}\">");
         }
         else if (browserName == "Safari") {
         document.write("<link type=\"text/css\" rel=\"stylesheet\" href=\"{!urlFor($Resource.safariCSS)}\">");
         }
         else {
         document.write("<link type=\"text/css\" rel=\"stylesheet\" href=\"{!urlFor($Resource.chromeCSS)}\">");
         }
</script>
</apex:define>
</apex:composition>
</apex:page>